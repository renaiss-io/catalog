
<style>
* {font-family: Verdana, sans-serif;}

.heading {
    grid-column-start: 1;
    grid-column-end: 3;
    grid-row-start: 1;
    grid-row-end: 3;
    display: grid;
    grid-template-columns: 60% 40%;
	height: 150px;
	font-size: small;
	overflow: auto;
  }
  
  .chart {
    display: grid;
    grid-template-columns: 1fr 2fr;
  }
  
  .container {
    border: 2px solid white;
    gap: 3px;
    background-color: #f9f9f9;
    display: grid;
  }
  
  .content {
    border: 2px solid #f9f9f9;
    border-radius: 5px;
    background-color: #f9f9f9;
    padding:  0.1em;
    grid-column-start: 1;
    grid-column-end: 3;
  }
  
  .item {
    border: 2px solid #f8f8f8;
    border-radius: 5px;
    background-color: #f4f4f4;
    padding: 0.25em;
  }
  
  .shared {
    grid-area: 1 / 1 / 1 / span 2;
	overflow-x: scroll;
	max-width: 100%;
  }

td {
	padding-left: 30px;
	font-size: small;
	white-space: nowrap;
}

th {
  padding-left: 30px;
  text-align: left;
  font-size: small;
  font-weight: normal;
  color: rgb(160, 160, 160);
}


</style>
<body>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@2.0.1/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <script>
        let f = (arr) => {arr.forEach(element => {element.x *= 1000}); return arr}
        let f1 = (arr) => {arr.forEach(element => {element.ts *= 1000}); return arr}
    </script>

	<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

	<div class="container">

		<div class="content heading">
    		<div class="item">
				<pre><code class="language-javascript">
				
where(@prometheus)
.what("node_timex_maxerror_seconds")
.when(30m)
.window(1m)

.request($where[0];$what[0];$when[0];$window[0]).as($ts_node_cpu_seconds_total)
.chart($ts_node_cpu_seconds_total; @line123)



				</code></pre>
			</div>
    	
			<div class="item">
				Found 3 PQL where and 7 chart variables.
TIME TOOK getting row metrics from [48 48 48 48] (506.851522ms)
Errors: 0
			</div>
  		</div>
		<div class="content chart">
		<div class="item shared">
			<table>
				<tr>
					<th>__name__</th>
					<th>instance</th>
					<th>job</th></tr>
				<tr>
					<td>node_timex_maxerror_seconds</td>
					<td>node-exporter:9100</td>
					<td>node_exporter</td></tr>
			</table>
		</div>
		
		<div class="item" style=" max-width: 600px;"><canvas id="ch_1200" ></canvas></div>

		<div class="item">
			<div><a href="#">$ts_node_cpu_seconds_total</a></div><div>
				<table>
					<tr>
						
						<th style="color:#4dc9f6;font-weight: bold;">[0]</th></tr>
					<tr>
						<td/></tr>
				</table>
			</div>
		</div>
		
			<script>
				const ch_1200 = document.getElementById('ch_1200');
				new Chart(ch_1200, {type: 'line',
					data: {
						datasets:[
								{
									data: f1([{"ts":1693856563,"v":0.1715},{"ts":1693856623,"v":0.2015},{"ts":1693856683,"v":0.2315},{"ts":1693856743,"v":0.2615},{"ts":1693856803,"v":0.2915},{"ts":1693856863,"v":0.3215},{"ts":1693856923,"v":0.3515},{"ts":1693856983,"v":0.3815},{"ts":1693857043,"v":0.4115},{"ts":1693857103,"v":0.4415},{"ts":1693857163,"v":0.4715},{"ts":1693857223,"v":0.5015},{"ts":1693857283,"v":0.0115},{"ts":1693857343,"v":0.0415},{"ts":1693857403,"v":0.0715},{"ts":1693857463,"v":0.1015},{"ts":1693857523,"v":0.1315},{"ts":1693857583,"v":0.1615},{"ts":1693857643,"v":0.1915},{"ts":1693857703,"v":0.2215},{"ts":1693857763,"v":0.2515},{"ts":1693857823,"v":0.2815},{"ts":1693857883,"v":0.3115},{"ts":1693857943,"v":0.3415},{"ts":1693858003,"v":0.3715},{"ts":1693858063,"v":0.4015},{"ts":1693858123,"v":0.4315},{"ts":1693858183,"v":0.4615},{"ts":1693858243,"v":0.4915},{"ts":1693858303,"v":0.5215},{"ts":1693858363,"v":0.5515}]),
									backgroundColor: '#4dc9f6',
									borderColor: '#4dc9f6',
								},
						]
					},options: {plugins:{legend:{display: false}},parsing: {xAxisKey: 'ts',yAxisKey: 'v'},scales: {y: {beginAtZero: true},x: {type: 'time',}}}});
			</script>
	</div>
</div>

</body>
